{"version":3,"sources":["meteor://ðŸ’»app/packages/std:accounts-ui/check-npm.js","meteor://ðŸ’»app/packages/std:accounts-ui/main_server.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/accounts_ui.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/helpers.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/login_session.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/api/server/loginWithoutPassword.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/api/server/servicesListPublication.js","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/Button.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/Buttons.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/Field.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/Fields.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/Form.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/FormMessage.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/FormMessages.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/LoginForm.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/PasswordOrService.jsx","meteor://ðŸ’»app/packages/std:accounts-ui/imports/ui/components/SocialButtons.jsx"],"names":["module","export","default","LoginForm","Accounts","STATES","link","v","redirect","validatePassword","validateEmail","validateUsername","ui","_options","requestPermissions","requestOfflineToken","forceApprovalPrompt","requireEmailVerification","passwordSignupFields","minimumPasswordLength","loginPath","signUpPath","resetPasswordPath","profilePath","changePasswordPath","homeRoutePath","onSubmitHook","onPreSignUpHook","Promise","resolve","onPostSignUpHook","onEnrollAccountHook","onResetPasswordHook","onVerifyEmailHook","onSignedInHook","onSignedOutHook","emailPattern","RegExp","browserHistory","config","options","VALID_KEYS","Object","keys","forEach","key","includes","Error","service","scope","Array","value","hook","path","exportDefault","loginButtonsSession","getLoginServices","hasPasswordService","loginResultCallback","capitalize","require","e","_loginButtonsSession","SIGN_IN","Symbol","SIGN_UP","PROFILE","PASSWORD_CHANGE","PASSWORD_RESET","ENROLL_ACCOUNT","services","Package","oauth","serviceNames","sort","map","name","err","LoginCancelledError","ServiceConfiguration","ConfigError","Meteor","isClient","window","location","href","email","showMessage","clearMessage","test","length","password","fieldId","errMsg","username","formState","fieldName","history","setTimeout","FlowRouter","go","push","pushState","string","replace","split","word","charAt","toUpperCase","slice","join","validateKey","KEY_PREFIX","set","_set","Session","get","onPageLoadLogin","attemptInfo","type","error","doneCallback","onResetPasswordLink","token","done","onEnrollmentLink","onEmailVerificationLink","verifyEmail","methods","loginWithoutPassword","check","String","user","users","findOne","$or","$exists","emails","address","verified","sendLoginEmail","_id","userId","find","tokenRecord","Random","secret","when","Date","update","$push","_ensure","verificationTokens","loginUrl","urls","to","from","emailTemplates","loginNoPassword","subject","text","html","headers","Email","send","siteName","url","greeting","profile","publish","fields","Button","React","PropTypes","Link","Component","render","label","disabled","className","onClick","props","propTypes","func","Buttons","buttons","id","i","Field","constructor","state","mount","triggerUpdate","onChange","input","target","componentDidMount","componentDidUpdate","prevProps","setState","hint","required","defaultValue","message","ref","trim","Fields","Form","ReactDOM","form","addEventListener","preventDefault","oauthServices","messages","translate","ready","object","isRequired","bool","FormMessage","isObject","obj","style","deprecated","console","warn","FormMessages","filter","uuid","injectTapEventPlugin","withTracker","T9n","indexBy","array","result","waiting","bind","prevState","changeState","getDefaultFieldValues","getDerivedStateFromProps","stateFormState","validateField","field","getUsernameOrEmailField","handleChange","getMessageForField","getUsernameField","getEmailField","getPasswordField","getSetPasswordField","getNewPasswordField","evt","setDefaultFieldValues","loginFields","assign","showPasswordChangeForm","showEnrollAccountForm","loginButtons","signOut","showCreateAccountLink","switchToSignUp","switchToSignIn","showForgotPasswordLink","switchToPasswordReset","switchToChangePassword","signUp","showSignInLink","signIn","passwordReset","passwordChange","switchToSignOut","cancelResetPassword","a","b","undefined","forbidClientAccountCreation","defaults","localStorage","setItem","JSON","stringify","defaultFieldValues","parse","getItem","clearDefaultFieldValues","removeItem","event","clearMessages","logout","usernameOrEmail","loginSelector","loginWithPassword","reason","oauthButtons","oauthSignIn","serviceName","capitalService","loginWithService","self","SignUp","createUser","promise","then","forgotPassword","newPassword","resetPassword","changePassword","clearTimeout","hideMessageTimout","componentWillUnmount","symbol","defaultProps","subscribe","PasswordOrService","labels","SocialButtons"],"mappings":"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","file":"/packages/std_accounts-ui.js","sourcesContent":["// import { checkNpmVersions } from 'meteor/tmeasday:check-npm-versions';\n//\n// checkNpmVersions({\n//   \"react\": \">=0.14.7 || ^15.0.0-rc.2\",\n//   \"react-dom\": \">=0.14.7 || ^15.0.0-rc.2\",\n// });\n","import { Accounts } from 'meteor/accounts-base';\nimport './imports/accounts_ui.js';\nimport './imports/login_session.js';\nimport { redirect, STATES }Â from './imports/helpers.js';\nimport './imports/api/server/loginWithoutPassword.js';\nimport './imports/api/server/servicesListPublication.js';\nimport LoginForm from './imports/ui/components/LoginForm.jsx';\n\nexport {\n  LoginForm as default,\n  Accounts,\n  STATES,\n};\n","import { Accounts } from 'meteor/accounts-base';\nimport {\n  redirect,\n  validatePassword,\n  validateEmail,\n  validateUsername,\n} from './helpers.js';\n\n/**\n * @summary Accounts UI\n * @namespace\n * @memberOf Accounts\n */\nAccounts.ui = {};\n\nAccounts.ui._options = {\n  requestPermissions: [],\n  requestOfflineToken: {},\n  forceApprovalPrompt: {},\n  requireEmailVerification: false,\n  passwordSignupFields: 'EMAIL_ONLY_NO_PASSWORD',\n  minimumPasswordLength: 7,\n  loginPath: '/',\n  signUpPath: null,\n  resetPasswordPath: null,\n  profilePath: '/',\n  changePasswordPath: null,\n  homeRoutePath: '/',\n  onSubmitHook: () => {},\n  onPreSignUpHook: () => new Promise(resolve => resolve()),\n  onPostSignUpHook: () => redirect(`${Accounts.ui._options.homeRoutePath}`),\n  onEnrollAccountHook: () => redirect(`${Accounts.ui._options.loginPath}`),\n  onResetPasswordHook: () => redirect(`${Accounts.ui._options.loginPath}`),\n  onVerifyEmailHook: () => redirect(`${Accounts.ui._options.profilePath}`),\n  onSignedInHook: () => redirect(`${Accounts.ui._options.homeRoutePath}`),\n  onSignedOutHook: () => redirect(`${Accounts.ui._options.homeRoutePath}`),\n  emailPattern: new RegExp('[^@]+@[^@\\.]{2,}\\.[^\\.@]+'),\n  browserHistory: null,\n};\n\n/**\n * @summary Configure the behavior of [`<Accounts.ui.LoginForm />`](#react-accounts-ui).\n * @anywhere\n * @param {Object} options\n * @param {Object} options.requestPermissions Which [permissions](#requestpermissions) to request from the user for each external service.\n * @param {Object} options.requestOfflineToken To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details.\n * @param {Object} options.forceApprovalPrompt If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google.\n * @param {String} options.passwordSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', '`EMAIL_ONLY`', or '`NO_PASSWORD`' (default).\n */\nAccounts.ui.config = function(options) {\n  // validate options keys\n  const VALID_KEYS = [\n    'passwordSignupFields',\n    'requestPermissions',\n    'requestOfflineToken',\n    'forbidClientAccountCreation',\n    'requireEmailVerification',\n    'minimumPasswordLength',\n    'loginPath',\n    'signUpPath',\n    'resetPasswordPath',\n    'profilePath',\n    'changePasswordPath',\n    'homeRoutePath',\n    'onSubmitHook',\n    'onPreSignUpHook',\n    'onPostSignUpHook',\n    'onEnrollAccountHook',\n    'onResetPasswordHook',\n    'onVerifyEmailHook',\n    'onSignedInHook',\n    'onSignedOutHook',\n    'validateField',\n    'emailPattern',\n    'browserHistory'    // Should probably make the redirect method configurable instead\n  ];\n\n  Object.keys(options).forEach(function (key) {\n    if (!VALID_KEYS.includes(key))\n      throw new Error(\"Accounts.ui.config: Invalid key: \" + key);\n  });\n\n  // Deal with `passwordSignupFields`\n  if (options.passwordSignupFields) {\n    if ([\n      \"USERNAME_AND_EMAIL\",\n      \"USERNAME_AND_OPTIONAL_EMAIL\",\n      \"USERNAME_ONLY\",\n      \"EMAIL_ONLY\",\n      \"EMAIL_ONLY_NO_PASSWORD\",\n      \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n    ].includes(options.passwordSignupFields)) {\n      Accounts.ui._options.passwordSignupFields = options.passwordSignupFields;\n    }\n    else {\n      throw new Error(\"Accounts.ui.config: Invalid option for `passwordSignupFields`: \" + options.passwordSignupFields);\n    }\n  }\n\n  // Deal with `requestPermissions`\n  if (options.requestPermissions) {\n    Object.keys(options.requestPermissions).forEach(service => {\n      const scope = options.requestPermissions[service];\n      if (Accounts.ui._options.requestPermissions[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestPermissions` more than once for \" + service);\n      }\n      else if (!(scope instanceof Array)) {\n        throw new Error(\"Accounts.ui.config: Value for `requestPermissions` must be an array\");\n      }\n      else {\n        Accounts.ui._options.requestPermissions[service] = scope;\n      }\n    });\n  }\n\n  // Deal with `requestOfflineToken`\n  if (options.requestOfflineToken) {\n    Object.keys(options.requestOfflineToken).forEach(service => {\n      const value = options.requestOfflineToken[service];\n      if (service !== 'google')\n        throw new Error(\"Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.\");\n\n      if (Accounts.ui._options.requestOfflineToken[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestOfflineToken` more than once for \" + service);\n      }\n      else {\n        Accounts.ui._options.requestOfflineToken[service] = value;\n      }\n    });\n  }\n\n  // Deal with `forceApprovalPrompt`\n  if (options.forceApprovalPrompt) {\n    Object.keys(options.forceApprovalPrompt).forEach(service => {\n      const value = options.forceApprovalPrompt[service];\n      if (service !== 'google')\n        throw new Error(\"Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.\");\n\n      if (Accounts.ui._options.forceApprovalPrompt[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for \" + service);\n      }\n      else {\n        Accounts.ui._options.forceApprovalPrompt[service] = value;\n      }\n    });\n  }\n\n  // Deal with `requireEmailVerification`\n  if (options.requireEmailVerification) {\n    if (typeof options.requireEmailVerification != 'boolean') {\n      throw new Error(`Accounts.ui.config: \"requireEmailVerification\" not a boolean`);\n    }\n    else {\n      Accounts.ui._options.requireEmailVerification = options.requireEmailVerification;\n    }\n  }\n\n  // Deal with `minimumPasswordLength`\n  if (options.minimumPasswordLength) {\n    if (typeof options.minimumPasswordLength != 'number') {\n      throw new Error(`Accounts.ui.config: \"minimumPasswordLength\" not a number`);\n    }\n    else {\n      Accounts.ui._options.minimumPasswordLength = options.minimumPasswordLength;\n    }\n  }\n\n  // Deal with the hooks.\n  for (let hook of [\n    'onSubmitHook',\n    'onPreSignUpHook',\n    'onPostSignUpHook',\n  ]) {\n    if (options[hook]) {\n      if (typeof options[hook] != 'function') {\n        throw new Error(`Accounts.ui.config: \"${hook}\" not a function`);\n      }\n      else {\n        Accounts.ui._options[hook] = options[hook];\n      }\n    }\n  }\n\n  // Deal with pattern.\n  for (let hook of [\n    'emailPattern',\n  ]) {\n    if (options[hook]) {\n      if (!(options[hook] instanceof RegExp)) {\n        throw new Error(`Accounts.ui.config: \"${hook}\" not a Regular Expression`);\n      }\n      else {\n        Accounts.ui._options[hook] = options[hook];\n      }\n    }\n  }\n\n  // deal with the paths.\n  for (let path of [\n    'loginPath',\n    'signUpPath',\n    'resetPasswordPath',\n    'profilePath',\n    'changePasswordPath',\n    'homeRoutePath'\n  ]) {\n    if (typeof options[path] !== 'undefined') {\n      if (options[path] !== null && typeof options[path] !== 'string') {\n        throw new Error(`Accounts.ui.config: ${path} is not a string or null`);\n      }\n      else {\n        Accounts.ui._options[path] = options[path];\n      }\n    }\n  }\n\n  // deal with redirect hooks.\n  for (let hook of [\n      'onEnrollAccountHook',\n      'onResetPasswordHook',\n      'onVerifyEmailHook',\n      'onSignedInHook',\n      'onSignedOutHook']) {\n    if (options[hook]) {\n      if (typeof options[hook] == 'function') {\n        Accounts.ui._options[hook] = options[hook];\n      }\n      else if (typeof options[hook] == 'string') {\n        Accounts.ui._options[hook] = () => redirect(options[hook]);\n      }\n      else {\n        throw new Error(`Accounts.ui.config: \"${hook}\" not a function or an absolute or relative path`);\n      }\n    }\n  }\n\n  // Deal with `browserHistory`\n  if (options.browserHistory) {\n    if (typeof options.browserHistory != 'object') {\n      throw new Error(`Accounts.ui.config: \"browserHistory\" not an object`);\n    }\n    else {\n      Accounts.ui._options.browserHistory = options.browserHistory;\n    }\n  }\n};\n\nexport default Accounts;\n","let browserHistory\ntry { browserHistory = require('react-router').browserHistory } catch(e) {}\nexport const loginButtonsSession = Accounts._loginButtonsSession;\nexport const STATES = {\n  SIGN_IN: Symbol('SIGN_IN'),\n  SIGN_UP: Symbol('SIGN_UP'),\n  PROFILE: Symbol('PROFILE'),\n  PASSWORD_CHANGE: Symbol('PASSWORD_CHANGE'),\n  PASSWORD_RESET: Symbol('PASSWORD_RESET'),\n  ENROLL_ACCOUNT: Symbol('ENROLL_ACCOUNT')\n};\n\nexport function getLoginServices() {\n  // First look for OAuth services.\n  const services = Package['accounts-oauth'] ? Accounts.oauth.serviceNames() : [];\n\n  // Be equally kind to all login services. This also preserves\n  // backwards-compatibility.\n  services.sort();\n\n  return services.map(function(name){\n    return {name: name};\n  });\n};\n// Export getLoginServices using old style globals for accounts-base which\n// requires it.\nthis.getLoginServices = getLoginServices;\n\nexport function hasPasswordService() {\n  // First look for OAuth services.\n  return !!Package['accounts-password'];\n};\n\nexport function loginResultCallback(service, err) {\n  if (!err) {\n\n  } else if (err instanceof Accounts.LoginCancelledError) {\n    // do nothing\n  } else if (err instanceof ServiceConfiguration.ConfigError) {\n\n  } else {\n    //loginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n  }\n\n  if (Meteor.isClient) {\n    if (typeof redirect === 'string'){\n      window.location.href = '/';\n    }\n\n    if (typeof service === 'function'){\n      service();\n    }\n  }\n};\n\nexport function passwordSignupFields() {\n  return Accounts.ui._options.passwordSignupFields || \"EMAIL_ONLY_NO_PASSWORD\";\n};\n\nexport function validateEmail(email, showMessage, clearMessage) {\n  if (passwordSignupFields() === \"USERNAME_AND_OPTIONAL_EMAIL\" && email === '') {\n    return true;\n  }\n  if (Accounts.ui._options.emailPattern.test(email)) {\n    return true;\n  } else if (!email || email.length === 0) {\n    showMessage(\"error.emailRequired\", 'warning', false, 'email');\n    return false;\n  } else {\n    showMessage(\"error.accounts.Invalid email\", 'warning', false, 'email');\n    return false;\n  }\n}\n\nexport function validatePassword(password = '', showMessage, clearMessage, fieldId = 'password'){\n  if (password.length >= Accounts.ui._options.minimumPasswordLength) {\n    return true;\n  } else {\n    // const errMsg = T9n.get(\"error.minChar\").replace(/7/, Accounts.ui._options.minimumPasswordLength);\n    const errMsg = \"error.minChar\"\n    showMessage(errMsg, 'warning', false, fieldId);\n    return false;\n  }\n};\n\nexport function validateUsername(username, showMessage, clearMessage, formState) {\n  if ( username ) {\n    return true;\n  } else {\n    const fieldName = (passwordSignupFields() === 'USERNAME_ONLY' || formState === STATES.SIGN_UP) ? 'username' : 'usernameOrEmail';\n    showMessage(\"error.usernameRequired\", 'warning', false, fieldName);\n    return false;\n  }\n}\n\nexport function redirect(redirect) {\n  if (Meteor.isClient) {\n    if (window.history) {\n      // Run after all app specific redirects, i.e. to the login screen.\n      Meteor.setTimeout(() => {\n        if (Package['kadira:flow-router']) {\n          Package['kadira:flow-router'].FlowRouter.go(redirect);\n        } else if (Package['kadira:flow-router-ssr']) {\n          Package['kadira:flow-router-ssr'].FlowRouter.go(redirect);\n        } else if (Accounts.ui._options.browserHistory) {\n          Accounts.ui._options.browserHistory.push(redirect);\n        } else if (browserHistory) {\n          browserHistory.push(redirect);\n        } else {\n          window.history.pushState( {} , 'redirect', redirect );\n        }\n      }, 100);\n    }\n  }\n}\n\nexport function capitalize(string) {\n  return string.replace(/\\-/, ' ').split(' ').map(word => {\n    return word.charAt(0).toUpperCase() + word.slice(1);\n  }).join(' ');\n}\n","import {Accounts} from 'meteor/accounts-base';\nimport {\n  STATES,\n  loginResultCallback,\n  getLoginServices\n} from './helpers.js';\n\nconst VALID_KEYS = [\n  'dropdownVisible',\n\n  // XXX consider replacing these with one key that has an enum for values.\n  'inSignupFlow',\n  'inForgotPasswordFlow',\n  'inChangePasswordFlow',\n  'inMessageOnlyFlow',\n\n  'errorMessage',\n  'infoMessage',\n\n  // dialogs with messages (info and error)\n  'resetPasswordToken',\n  'enrollAccountToken',\n  'justVerifiedEmail',\n  'justResetPassword',\n\n  'configureLoginServiceDialogVisible',\n  'configureLoginServiceDialogServiceName',\n  'configureLoginServiceDialogSaveDisabled',\n  'configureOnDesktopVisible'\n];\n\nexport const validateKey = function (key) {\n  if (!VALID_KEYS.includes(key))\n    throw new Error(\"Invalid key in loginButtonsSession: \" + key);\n};\n\nexport const KEY_PREFIX = \"Meteor.loginButtons.\";\n\n// XXX This should probably be package scope rather than exported\n// (there was even a comment to that effect here from before we had\n// namespacing) but accounts-ui-viewer uses it, so leave it as is for\n// now\nAccounts._loginButtonsSession = {\n  set: function(key, value) {\n    validateKey(key);\n    if (['errorMessage', 'infoMessage'].includes(key))\n      throw new Error(\"Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().\");\n\n    this._set(key, value);\n  },\n\n  _set: function(key, value) {\n    Session.set(KEY_PREFIX + key, value);\n  },\n\n  get: function(key) {\n    validateKey(key);\n    return Session.get(KEY_PREFIX + key);\n  }\n};\n\nif (Meteor.isClient){\n  // In the login redirect flow, we'll have the result of the login\n  // attempt at page load time when we're redirected back to the\n  // application.  Register a callback to update the UI (i.e. to close\n  // the dialog on a successful login or display the error on a failed\n  // login).\n  //\n  Accounts.onPageLoadLogin(function (attemptInfo) {\n    // Ignore if we have a left over login attempt for a service that is no longer registered.\n    if (getLoginServices().map(({ name }) => name).includes(attemptInfo.type))\n      loginResultCallback(attemptInfo.type, attemptInfo.error);\n  });\n\n  let doneCallback;\n\n  Accounts.onResetPasswordLink(function (token, done) {\n    Accounts._loginButtonsSession.set('resetPasswordToken', token);\n    Session.set(KEY_PREFIX + 'state', 'resetPasswordToken');\n    doneCallback = done;\n\n    Accounts.ui._options.onResetPasswordHook();\n  });\n\n  Accounts.onEnrollmentLink(function (token, done) {\n    Accounts._loginButtonsSession.set('enrollAccountToken', token);\n    Session.set(KEY_PREFIX + 'state', 'enrollAccountToken');\n    doneCallback = done;\n\n    Accounts.ui._options.onEnrollAccountHook();\n  });\n\n  Accounts.onEmailVerificationLink(function (token, done) {\n    Accounts.verifyEmail(token, function (error) {\n      if (! error) {\n        Accounts._loginButtonsSession.set('justVerifiedEmail', true);\n        Session.set(KEY_PREFIX + 'state', 'justVerifiedEmail');\n        Accounts.ui._options.onSignedInHook();\n      }\n      else {\n        Accounts.ui._options.onVerifyEmailHook();\n      }\n\n      done();\n    });\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\n///\n/// LOGIN WITHOUT PASSWORD\n///\n\n// Method called by a user to request a password reset email. This is\n// the start of the reset process.\nMeteor.methods({\n  loginWithoutPassword: function ({ email, username = null }) {\n    if (username !== null) {\n      check(username, String);\n\n      var user = Meteor.users.findOne({ $or: [{\n          \"username\": username, \"emails.address\": { $exists: 1 }\n        }, {\n          \"emails.address\": email\n        }]\n      });\n      if (!user)\n        throw new Meteor.Error(403, \"User not found\");\n\n      email = user.emails[0].address;\n    }\n    else {\n      check(email, String);\n\n      var user = Meteor.users.findOne({ \"emails.address\": email });\n      if (!user)\n        throw new Meteor.Error(403, \"User not found\");\n    }\n\n    if (Accounts.ui._options.requireEmailVerification) {\n      if (!user.emails[0].verified) {\n        throw new Meteor.Error(403, \"Email not verified\");\n      }\n    }\n\n    Accounts.sendLoginEmail(user._id, email);\n  },\n});\n\n/**\n * @summary Send an email with a link the user can use verify their email address.\n * @locus Server\n * @param {String} userId The id of the user to send email to.\n * @param {String} [email] Optional. Which address of the user's to send the email to. This address must be in the user's `emails` list. Defaults to the first unverified email in the list.\n */\nAccounts.sendLoginEmail = function (userId, address) {\n  // XXX Also generate a link using which someone can delete this\n  // account if they own said address but weren't those who created\n  // this account.\n\n  // Make sure the user exists, and address is one of their addresses.\n  var user = Meteor.users.findOne(userId);\n  if (!user)\n    throw new Error(\"Can't find user\");\n  // pick the first unverified address if we weren't passed an address.\n  if (!address) {\n    var email = (user.emails || []).find(({ verified }) => !verified);\n    address = (email || {}).address;\n  }\n  // make sure we have a valid address\n  if (!address || !(user.emails || []).map(({ address }) => address).includes(address))\n    throw new Error(\"No such email address for user.\");\n\n\n  var tokenRecord = {\n    token: Random.secret(),\n    address: address,\n    when: new Date()};\n  Meteor.users.update(\n    {_id: userId},\n    {$push: {'services.email.verificationTokens': tokenRecord}});\n\n  // before passing to template, update user object with new token\n  Meteor._ensure(user, 'services', 'email');\n  if (!user.services.email.verificationTokens) {\n    user.services.email.verificationTokens = [];\n  }\n  user.services.email.verificationTokens.push(tokenRecord);\n\n  var loginUrl = Accounts.urls.verifyEmail(tokenRecord.token);\n\n  var options = {\n    to: address,\n    from: Accounts.emailTemplates.loginNoPassword.from\n      ? Accounts.emailTemplates.loginNoPassword.from(user)\n      : Accounts.emailTemplates.from,\n    subject: Accounts.emailTemplates.loginNoPassword.subject(user)\n  };\n\n  if (typeof Accounts.emailTemplates.loginNoPassword.text === 'function') {\n    options.text =\n      Accounts.emailTemplates.loginNoPassword.text(user, loginUrl);\n  }\n\n  if (typeof Accounts.emailTemplates.loginNoPassword.html === 'function')\n    options.html =\n      Accounts.emailTemplates.loginNoPassword.html(user, loginUrl);\n\n  if (typeof Accounts.emailTemplates.headers === 'object') {\n    options.headers = Accounts.emailTemplates.headers;\n  }\n\n  Email.send(options);\n};\n\n// Check for installed accounts-password dependency.\nif (Accounts.emailTemplates) {\n  Accounts.emailTemplates.loginNoPassword = {\n    subject: function(user) {\n      return \"Login on \" + Accounts.emailTemplates.siteName;\n    },\n    text: function(user, url) {\n      var greeting = (user.profile && user.profile.name) ?\n            (\"Hello \" + user.profile.name + \",\") : \"Hello,\";\n      return `${greeting}\nTo login, simply click the link below.\n${url}\nThanks.\n`;\n    }\n  };\n}\n","import { Meteor } from 'meteor/meteor';\nimport { getLoginServices } from '../../helpers.js';\n\nMeteor.publish('servicesList', function() {\n  let services = getLoginServices();\n  if (Package['accounts-password']) {\n    services.push({name: 'password'});\n  }\n  let fields = {};\n  // Publish the existing services for a user, only name or nothing else.\n  services.forEach(service => fields[`services.${service.name}.name`] = 1);\n  return Meteor.users.find({ _id: this.userId }, { fields: fields});\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Accounts } from 'meteor/accounts-base';\n\nlet Link;\ntry { Link = require('react-router').Link; } catch(e) {}\n\nexport class Button extends React.Component {\n  render () {\n    const {\n      label,\n      href = null,\n      type,\n      disabled = false,\n      className,\n      onClick\n    } = this.props;\n    if (type == 'link') {\n      // Support React Router.\n      if (Link && href) {\n        return <Link to={ href }Â className={ className }>{ label }</Link>;\n      } else {\n        return <aÂ href={ href }Â className={ className } onClick={ onClick }>{ label }</a>;\n      }\n    }\n    return <button className={ className }\n                   type={ type }Â \n                   disabled={ disabled }\n                   onClick={ onClick }>{ label }</button>;\n  }\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func\n};\n\nAccounts.ui.Button = Button;\n","import React from 'react';\nimport './Button.jsx';\nimport { Accounts } from 'meteor/accounts-base';\n\nexport class Buttons extends React.Component {\n  render () {\n    let { buttons = {}, className = \"buttons\" } = this.props;\n    return (\n      <div className={ className }>\n        {Object.keys(buttons).map((id, i) =>\n          <Accounts.ui.Button {...buttons[id]} key={i} />\n        )}\n      </div>\n    );\n  }\n};\n\nAccounts.ui.Buttons = Buttons;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Accounts } from 'meteor/accounts-base';\n\nexport class Field extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mount: true\n    };\n  }\n\n  triggerUpdate() {\n    // Trigger an onChange on inital load, to support browser prefilled values.\n    const { onChange } = this.props;\n    if (this.input && onChange) {\n      onChange({ target: { value: this.input.value || \"\" } });\n    }\n  }\n\n  componentDidMount() {\n    this.triggerUpdate();\n  }\n\n  componentDidUpdate(prevProps) {\n    // Re-mount component so that we don't expose browser prefilled passwords if the component was\n    // a password before and now something else.\n    if (prevProps.id !== this.props.id) {\n      this.setState({mount: false});\n    }\n    else if (!this.state.mount) {\n      this.setState({mount: true});\n      this.triggerUpdate();\n    }\n  }\n\n  render() {\n    const {\n      id,\n      hint,\n      label,\n      type = 'text',\n      onChange,\n      required = false,\n      className = \"field\",\n      defaultValue = \"\",\n      message,\n    } = this.props;\n    const { mount = true } = this.state;\n    if (type == 'notice') {\n      return <div className={ className }>{ label }</div>;\n    }\n    return mount ? (\n      <div className={ className }>\n        <label htmlFor={ id }>{ label }</label>\n        <input\n          id={ id }\n          ref={ (ref) => this.input = ref }\n          type={ type }\n          onChange={ onChange }\n          placeholder={ hint }\n          defaultValue={ defaultValue }\n        />\n        {message && (\n          <span className={['message', message.type].join(' ').trim()}>\n            {message.message}</span>\n        )}\n      </div>\n    ) : null;\n  }\n}\n\nField.propTypes = {\n  onChange: PropTypes.func\n};\n\nAccounts.ui.Field = Field;\n","import React from 'react';\nimport { Accounts } from 'meteor/accounts-base';\nimport './Field.jsx';\n\nexport class Fields extends React.Component {\n  render () {\n    let { fields = {}, className = \"fields\" } = this.props;\n    return (\n      <div className={ className }>\n        {Object.keys(fields).map((id, i) =>\n          <Accounts.ui.Field {...fields[id]} key={i} />\n        )}\n      </div>\n    );\n  }\n}\n\nAccounts.ui.Fields = Fields;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport './Fields.jsx';\nimport './Buttons.jsx';\nimport './FormMessage.jsx';\nimport './PasswordOrService.jsx';\nimport './SocialButtons.jsx';\nimport './FormMessages.jsx';\n\nexport class Form extends React.Component {\n  componentDidMount() {\n    let form = this.form;\n    if (form) {\n      form.addEventListener('submit', (e) => {\n        e.preventDefault();\n      });\n    }\n  }\n\n  render() {\n    const {\n      hasPasswordService,\n      oauthServices,\n      fields,\n      buttons,\n      error,\n      messages,\n      translate,\n      ready = true,\n      className\n    } = this.props;\n    return (\n      <form\n        ref={(ref) => this.form = ref}\n        className={[className, ready ? \"ready\" : null].join(' ')}\n        className=\"accounts-ui\"\n        noValidate\n      >\n        <Accounts.ui.Fields fields={ fields } />\n        <Accounts.ui.Buttons buttons={ buttons } />\n        <Accounts.ui.PasswordOrService oauthServices={ oauthServices } translate={ translate } />\n        <Accounts.ui.SocialButtons oauthServices={ oauthServices } />\n        <Accounts.ui.FormMessages messages={messages} />\n      </form>\n    );\n  }\n}\n\nForm.propTypes = {\n  oauthServices: PropTypes.object,\n  fields: PropTypes.object.isRequired,\n  buttons: PropTypes.object.isRequired,\n  translate: PropTypes.func.isRequired,\n  error: PropTypes.string,\n  ready: PropTypes.bool\n};\n\nAccounts.ui.Form = Form;\n","import React from 'react';\nimport { Accounts } from 'meteor/accounts-base';\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\nexport class FormMessage extends React.Component {\n  render () {\n    let { message, type, className = \"message\", style = {}, deprecated } = this.props;\n    // XXX Check for deprecations.\n    if (deprecated) {\n      // Found backwords compatibility issue.\n      console.warn('You are overriding Accounts.ui.Form and using FormMessage, the use of FormMessage in Form has been depreacted in v1.2.11, update your implementation to use FormMessages: https://github.com/studiointeract/accounts-ui/#deprecations');\n    }\n    message = isObject(message) ? message.message : message; // If message is object, then try to get message from it\n    return message ? (\n      <div style={ style }Â \n           className={[ className, type ].join(' ')}>{ message }</div>\n    ) : null;\n  }\n}\n\nAccounts.ui.FormMessage = FormMessage;\n","import React, {Â Component } from 'react';\nimport { Accounts } from 'meteor/accounts-base';\n\nexport class FormMessages extends Component {\n  render () {\n    const { messages = [], className = \"messages\", style = {} } = this.props;\n    return messages.length > 0 && (\n      <div className=\"messages\">\n        {messages\n          .filter(message => !('field' in message))\n          .map(({Â message, type }, i) =>\n          <Accounts.ui.FormMessage\n            message={message}\n            type={type}\n            key={i}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nAccounts.ui.FormMessages = FormMessages;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport uuid from \"uuid\";\nimport injectTapEventPlugin from 'react-tap-event-plugin';\ninjectTapEventPlugin();\nimport { withTracker } from 'meteor/react-meteor-data';\nimport { Accounts } from 'meteor/accounts-base';\nimport { T9n } from 'meteor/softwarerero:accounts-t9n';\nimport {Â KEY_PREFIX } from '../../login_session.js';\nimport './Form.jsx';\n\nimport {\n  STATES,\n  passwordSignupFields,\n  validateEmail,\n  validatePassword,\n  validateUsername,\n  loginResultCallback,\n  getLoginServices,\n  hasPasswordService,\n  capitalize\n} from '../../helpers.js';\n\nfunction indexBy(array, key) {\n  const result = {};\n  array.forEach(function(obj) {\n    result[obj[key]] = obj;\n  });\n  return result;\n}\n\nexport default class LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    let {\n      formState,\n      loginPath,\n      signUpPath,\n      resetPasswordPath,\n      profilePath,\n      changePasswordPath\n    } = props;\n\n    if (formState === STATES.SIGN_IN && Package['accounts-password']) {\n      console.warn('Do not force the state to SIGN_IN on Accounts.ui.LoginForm, it will make it impossible to reset password in your app, this state is also the default state if logged out, so no need to force it.');\n    }\n\n    // Set inital state.\n    this.state = {\n      messages: [],\n      waiting: true,\n      formState: formState ? formState : Accounts.user() ? STATES.PROFILE : STATES.SIGN_IN,\n      onSubmitHook: props.onSubmitHook || Accounts.ui._options.onSubmitHook,\n      onSignedInHook: props.onSignedInHook || Accounts.ui._options.onSignedInHook,\n      onSignedOutHook: props.onSignedOutHook || Accounts.ui._options.onSignedOutHook,\n      onPreSignUpHook: props.onPreSignUpHook || Accounts.ui._options.onPreSignUpHook,\n      onPostSignUpHook: props.onPostSignUpHook || Accounts.ui._options.onPostSignUpHook,\n    };\n    this.translate = this.translate.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState(prevState => ({ waiting: false, ready: true }));\n    let changeState = Session.get(KEY_PREFIX + 'state');\n    switch (changeState) {\n      case 'enrollAccountToken':\n        this.setState(prevState => ({\n          formState: STATES.ENROLL_ACCOUNT\n        }));\n        Session.set(KEY_PREFIX + 'state', null);\n        break;\n      case 'resetPasswordToken':\n        this.setState(prevState => ({\n          formState: STATES.PASSWORD_CHANGE\n        }));\n        Session.set(KEY_PREFIX + 'state', null);\n        break;\n\n      case 'justVerifiedEmail':\n        this.setState(prevState => ({\n          formState: STATES.PROFILE\n        }));\n        Session.set(KEY_PREFIX + 'state', null);\n        break;\n    }\n\n    // Add default field values once the form did mount on the client\n    this.setState(prevState => ({\n      ...LoginForm.getDefaultFieldValues(),\n    }));\n  }\n\n  static getDerivedStateFromProps({ formState }, { formState: stateFormState }) {\n    return (formState && formState !== stateFormState) ?\n        {\n          formState: formState,\n          ...LoginForm.getDefaultFieldValues(),\n        }\n      :\n        null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (!prevProps.user !== !this.props.user) {\n      this.setState({\n        formState: this.props.user ? STATES.PROFILE : STATES.SIGN_IN\n      });\n    }\n  }\n\n  translate(text) {\n    // if (this.props.t) {\n    //   return this.props.t(text);\n    // }\n    return T9n.get(text);\n  }\n\n  validateField(field, value, fieldId) {\n    const { formState } = this.state;\n    switch(field) {\n      case 'email':\n        return validateEmail(value,\n          this.showMessage.bind(this),\n          this.clearMessage.bind(this),\n        );\n      case 'password':\n        return validatePassword(value,\n          this.showMessage.bind(this),\n          this.clearMessage.bind(this),\n          fieldId\n        );\n      case 'username':\n        return validateUsername(value,\n          this.showMessage.bind(this),\n          this.clearMessage.bind(this),\n          formState,\n        );\n    }\n  }\n\n  getUsernameOrEmailField() {\n    return {\n      id: 'usernameOrEmail',\n      hint: this.translate('enterUsernameOrEmail'),\n      label: this.translate('usernameOrEmail'),\n      required: true,\n      defaultValue: this.state.username || \"\",\n      onChange: this.handleChange.bind(this, 'usernameOrEmail'),\n      message: this.getMessageForField('usernameOrEmail'),\n    };\n  }\n\n  getUsernameField() {\n    return {\n      id: 'username',\n      hint: this.translate('enterUsername'),\n      label: this.translate('username'),\n      required: true,\n      defaultValue: this.state.username || \"\",\n      onChange: this.handleChange.bind(this, 'username'),\n      message: this.getMessageForField('username'),\n    };\n  }\n\n  getEmailField() {\n    return {\n      id: 'email',\n      hint: this.translate('enterEmail'),\n      label: this.translate('email'),\n      type: 'email',\n      required: true,\n      defaultValue: this.state.email || \"\",\n      onChange: this.handleChange.bind(this, 'email'),\n      message: this.getMessageForField('email'),\n    };\n  }\n\n  getPasswordField() {\n    return {\n      id: 'password',\n      hint: this.translate('enterPassword'),\n      label: this.translate('password'),\n      type: 'password',\n      required: true,\n      defaultValue: this.state.password || \"\",\n      onChange: this.handleChange.bind(this, 'password'),\n      message: this.getMessageForField('password'),\n    };\n  }\n\n  getSetPasswordField() {\n    return {\n      id: 'newPassword',\n      hint: this.translate('enterPassword'),\n      label: this.translate('choosePassword'),\n      type: 'password',\n      required: true,\n      onChange: this.handleChange.bind(this, 'newPassword')\n    };\n  }\n\n  getNewPasswordField() {\n    return {\n      id: 'newPassword',\n      hint: this.translate('enterNewPassword'),\n      label: this.translate('newPassword'),\n      type: 'password',\n      required: true,\n      onChange: this.handleChange.bind(this, 'newPassword'),\n      message: this.getMessageForField('newPassword'),\n    };\n  }\n\n  handleChange(field, evt) {\n    let value = evt.target.value;\n    switch (field) {\n      case 'password': break;\n      default:\n        value = value.trim();\n        break;\n    }\n    this.setState({ [field]: value });\n    LoginForm.setDefaultFieldValues({Â [field]: value });\n  }\n\n  fields() {\n    const loginFields = [];\n    const { formState } = this.state;\n\n    if (!hasPasswordService() && getLoginServices().length == 0) {\n      loginFields.push({\n        label: 'No login service added, i.e. accounts-password',\n        type: 'notice'\n      });\n    }\n\n    if (hasPasswordService() && formState == STATES.SIGN_IN) {\n      if ([\n        \"USERNAME_AND_EMAIL\",\n        \"USERNAME_AND_OPTIONAL_EMAIL\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getUsernameOrEmailField());\n      }\n\n      if (passwordSignupFields() === \"USERNAME_ONLY\") {\n        loginFields.push(this.getUsernameField());\n      }\n\n      if ([\n        \"EMAIL_ONLY\",\n        \"EMAIL_ONLY_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getEmailField());\n      }\n\n      if (![\n        \"EMAIL_ONLY_NO_PASSWORD\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getPasswordField());\n      }\n    }\n\n    if (hasPasswordService() && formState == STATES.SIGN_UP) {\n      if ([\n        \"USERNAME_AND_EMAIL\",\n        \"USERNAME_AND_OPTIONAL_EMAIL\",\n        \"USERNAME_ONLY\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getUsernameField());\n      }\n\n      if ([\n        \"USERNAME_AND_EMAIL\",\n        \"EMAIL_ONLY\",\n        \"EMAIL_ONLY_NO_PASSWORD\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getEmailField());\n      }\n\n      if ([\"USERNAME_AND_OPTIONAL_EMAIL\"].includes(passwordSignupFields())) {\n        loginFields.push(Object.assign(this.getEmailField(), {required: false}));\n      }\n\n      if (![\n        \"EMAIL_ONLY_NO_PASSWORD\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())) {\n        loginFields.push(this.getPasswordField());\n      }\n    }\n\n    if (formState == STATES.PASSWORD_RESET) {\n      loginFields.push(this.getEmailField());\n    }\n\n    if (this.showPasswordChangeForm()) {\n      if (Meteor.isClient && !Accounts._loginButtonsSession.get('resetPasswordToken')) {\n        loginFields.push(this.getPasswordField());\n      }\n      loginFields.push(this.getNewPasswordField());\n    }\n\n    if (this.showEnrollAccountForm()) {\n      loginFields.push(this.getSetPasswordField());\n    }\n    return indexBy(loginFields, 'id');\n  }\n\n  buttons() {\n    const {\n      loginPath = Accounts.ui._options.loginPath,\n      signUpPath = Accounts.ui._options.signUpPath,\n      resetPasswordPath = Accounts.ui._options.resetPasswordPath,\n      changePasswordPath = Accounts.ui._options.changePasswordPath,\n      profilePath = Accounts.ui._options.profilePath,\n    } = this.props;\n    const { user } = this.props;\n    const { formState, waiting } = this.state;\n    let loginButtons = [];\n\n    if (user && formState == STATES.PROFILE) {\n      loginButtons.push({\n        id: 'signOut',\n        label: this.translate('signOut'),\n        disabled: waiting,\n        onClick: this.signOut.bind(this)\n      });\n    }\n\n    if (this.showCreateAccountLink()) {\n      loginButtons.push({\n        id: 'switchToSignUp',\n        label: this.translate('signUp'),\n        type: 'link',\n        href: signUpPath,\n        onClick: this.switchToSignUp.bind(this)\n      });\n    }\n\n    if (formState == STATES.SIGN_UP || formState == STATES.PASSWORD_RESET) {\n      loginButtons.push({\n        id: 'switchToSignIn',\n        label: this.translate('signIn'),\n        type: 'link',\n        href: loginPath,\n        onClick: this.switchToSignIn.bind(this)\n      });\n    }\n\n    if (this.showForgotPasswordLink()) {\n      loginButtons.push({\n        id: 'switchToPasswordReset',\n        label: this.translate('forgotPassword'),\n        type: 'link',\n        href: resetPasswordPath,\n        onClick: this.switchToPasswordReset.bind(this)\n      });\n    }\n\n    if (user && ![\n        \"EMAIL_ONLY_NO_PASSWORD\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields())\n      && formState == STATES.PROFILE\n      && (user.services && 'password' in user.services)) {\n      loginButtons.push({\n        id: 'switchToChangePassword',\n        label: this.translate('changePassword'),\n        type: 'link',\n        href: changePasswordPath,\n        onClick: this.switchToChangePassword.bind(this)\n      });\n    }\n\n    if (formState == STATES.SIGN_UP) {\n      loginButtons.push({\n        id: 'signUp',\n        label: this.translate('signUp'),\n        type: hasPasswordService() ? 'submit' : 'link',\n        className: 'active',\n        disabled: waiting,\n        onClick: hasPasswordService() ? this.signUp.bind(this, {}) : null\n      });\n    }\n\n    if (this.showSignInLink()) {\n      loginButtons.push({\n        id: 'signIn',\n        label: this.translate('signIn'),\n        type: hasPasswordService() ? 'submit' : 'link',\n        className: 'active',\n        disabled: waiting,\n        onClick: hasPasswordService() ? this.signIn.bind(this) : null\n      });\n    }\n\n    if (formState == STATES.PASSWORD_RESET) {\n      loginButtons.push({\n        id: 'emailResetLink',\n        label: this.translate('resetYourPassword'),\n        type: 'submit',\n        disabled: waiting,\n        onClick: this.passwordReset.bind(this)\n      });\n    }\n\n    if (this.showPasswordChangeForm() || this.showEnrollAccountForm()) {\n      loginButtons.push({\n        id: 'changePassword',\n        label: (this.showPasswordChangeForm() ? this.translate('changePassword') : this.translate('setPassword')),\n        type: 'submit',\n        disabled: waiting,\n        onClick: this.passwordChange.bind(this)\n      });\n\n      if (Accounts.user()) {\n        loginButtons.push({\n          id: 'switchToSignOut',\n          label: this.translate('cancel'),\n          type: 'link',\n          href: profilePath,\n          onClick: this.switchToSignOut.bind(this)\n        });\n      } else {\n        loginButtons.push({\n          id: 'cancelResetPassword',\n          label: this.translate('cancel'),\n          type: 'link',\n          onClick: this.cancelResetPassword.bind(this),\n        });\n      }\n    }\n\n    // Sort the button array so that the submit button always comes first, and\n    // buttons should also come before links.\n    loginButtons.sort((a, b) => {\n      return (\n        b.type == 'submit' &&\n        a.type != undefined) - (\n          a.type == 'submit' &&\n          b.type != undefined);\n    });\n\n    return indexBy(loginButtons, 'id');\n  }\n\n  showSignInLink(){\n    return this.state.formState == STATES.SIGN_IN && Package['accounts-password'];\n  }\n\n  showPasswordChangeForm() {\n    return(Package['accounts-password']\n      && this.state.formState == STATES.PASSWORD_CHANGE);\n  }\n\n  showEnrollAccountForm() {\n    return(Package['accounts-password']\n      && this.state.formState == STATES.ENROLL_ACCOUNT);\n  }\n\n  showCreateAccountLink() {\n    return this.state.formState == STATES.SIGN_IN && !Accounts._options.forbidClientAccountCreation && Package['accounts-password'];\n  }\n\n  showForgotPasswordLink() {\n    return !this.props.user\n      && this.state.formState == STATES.SIGN_IN\n      && [\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"EMAIL_ONLY\"].includes(passwordSignupFields());\n  }\n\n  /**\n   * Helper to store field values while using the form.\n   */\n  static setDefaultFieldValues(defaults) {\n    if (typeof defaults !== 'object') {\n      throw new Error('Argument to setDefaultFieldValues is not of type object');\n    } else if (typeof localStorage !== 'undefined' && localStorage) {\n      localStorage.setItem('accounts_ui', JSON.stringify({\n        passwordSignupFields: passwordSignupFields(),\n        ...LoginForm.getDefaultFieldValues(),\n        ...defaults,\n      }));\n    }\n  }\n\n  /**\n   * Helper to get field values when switching states in the form.\n   */\n  static getDefaultFieldValues() {\n    if (typeof localStorage !== 'undefined' && localStorage) {\n      const defaultFieldValues = JSON.parse(localStorage.getItem('accounts_ui') || null);\n      if (defaultFieldValues\n        && defaultFieldValues.passwordSignupFields === passwordSignupFields()) {\n        return defaultFieldValues;\n      }\n    }\n  }\n\n  /**\n   * Helper to clear field values when signing in, up or out.\n   */\n  clearDefaultFieldValues() {\n    if (typeof localStorage !== 'undefined' && localStorage) {\n      localStorage.removeItem('accounts_ui');\n    }\n  }\n\n  switchToSignUp(event) {\n    event.preventDefault();\n    this.setState({\n      formState: STATES.SIGN_UP,\n      ...LoginForm.getDefaultFieldValues(),\n    });\n    this.clearMessages();\n  }\n\n  switchToSignIn(event) {\n    event.preventDefault();\n    this.setState({\n      formState: STATES.SIGN_IN,\n      ...LoginForm.getDefaultFieldValues(),\n    });\n    this.clearMessages();\n  }\n\n  switchToPasswordReset(event) {\n    event.preventDefault();\n    this.setState({\n      formState: STATES.PASSWORD_RESET,\n      ...LoginForm.getDefaultFieldValues(),\n    });\n    this.clearMessages();\n  }\n\n  switchToChangePassword(event) {\n    event.preventDefault();\n    this.setState({\n      formState: STATES.PASSWORD_CHANGE,\n      ...LoginForm.getDefaultFieldValues(),\n    });\n    this.clearMessages();\n  }\n\n  switchToSignOut(event) {\n    event.preventDefault();\n    this.setState({\n      formState: STATES.PROFILE,\n    });\n    this.clearMessages();\n  }\n\n  cancelResetPassword(event) {\n    event.preventDefault();\n    Accounts._loginButtonsSession.set('resetPasswordToken', null);\n    this.setState({\n      formState: STATES.SIGN_IN,\n      messages: [],\n    });\n  }\n\n  signOut() {\n    Meteor.logout(() => {\n      this.setState({\n        formState: STATES.SIGN_IN,\n        password: null,\n      });\n      this.state.onSignedOutHook();\n      this.clearMessages();\n      this.clearDefaultFieldValues();\n    });\n  }\n\n  signIn() {\n    const {\n      username = null,\n      email = null,\n      usernameOrEmail = null,\n      password,\n      formState,\n      onSubmitHook\n    }Â = this.state;\n    let error = false;\n    let loginSelector;\n    this.clearMessages();\n\n    if (usernameOrEmail !== null) {\n      if (!this.validateField('username', usernameOrEmail)) {\n        if (this.state.formState == STATES.SIGN_UP) {\n          this.state.onSubmitHook(\"error.accounts.usernameRequired\", this.state.formState);\n        }\n        error = true;\n      }\n      else {\n        if ([\"USERNAME_AND_EMAIL_NO_PASSWORD\"].includes(passwordSignupFields())) {\n          this.loginWithoutPassword();\n          return;\n        } else {\n          loginSelector = usernameOrEmail;\n        }\n      }\n    } else if (username !== null) {\n      if (!this.validateField('username', username)) {\n        if (this.state.formState == STATES.SIGN_UP) {\n          this.state.onSubmitHook(\"error.accounts.usernameRequired\", this.state.formState);\n        }\n        error = true;\n      }\n      else {\n        loginSelector = { username: username };\n      }\n    }\n    else if (usernameOrEmail == null) {\n      if (!this.validateField('email', email)) {\n        error = true;\n      }\n      else {\n        if ([\"EMAIL_ONLY_NO_PASSWORD\"].includes(passwordSignupFields())) {\n          this.loginWithoutPassword();\n          error = true;\n        } else {\n          loginSelector = { email };\n        }\n      }\n    }\n    if (![\"EMAIL_ONLY_NO_PASSWORD\"].includes(passwordSignupFields())\n      && !this.validateField('password', password)) {\n      error = true;\n    }\n\n    if (!error) {\n      Meteor.loginWithPassword(loginSelector, password, (error, result) => {\n        onSubmitHook(error,formState);\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n        }\n        else {\n          loginResultCallback(() => this.state.onSignedInHook());\n          this.setState({\n            formState: STATES.PROFILE,\n            password: null,\n          });\n          this.clearDefaultFieldValues();\n        }\n      });\n    }\n  }\n\n  oauthButtons() {\n    const { formState, waiting } = this.state;\n    let oauthButtons = [];\n    if (formState == STATES.SIGN_IN || formState == STATES.SIGN_UP ) {\n      if(Accounts.oauth) {\n        Accounts.oauth.serviceNames().map((service) => {\n          oauthButtons.push({\n            id: service,\n            label: capitalize(service),\n            disabled: waiting,\n            type: 'button',\n            className: `btn-${service} ${service}`,\n            onClick: this.oauthSignIn.bind(this, service)\n          });\n        });\n      }\n    }\n    return indexBy(oauthButtons, 'id');\n  }\n\n  oauthSignIn(serviceName) {\n    const { user } = this.props;\n    const { formState, waiting, onSubmitHook } = this.state;\n    //Thanks Josh Owens for this one.\n    function capitalService() {\n      return serviceName.charAt(0).toUpperCase() + serviceName.slice(1);\n    }\n\n    if(serviceName === 'meteor-developer'){\n      serviceName = 'meteorDeveloperAccount';\n    }\n\n    const loginWithService = Meteor[\"loginWith\" + capitalService()];\n\n    let options = {}; // use default scope unless specified\n    if (Accounts.ui._options.requestPermissions[serviceName])\n      options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n    if (Accounts.ui._options.requestOfflineToken[serviceName])\n      options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n    if (Accounts.ui._options.forceApprovalPrompt[serviceName])\n      options.forceApprovalPrompt = Accounts.ui._options.forceApprovalPrompt[serviceName];\n\n    this.clearMessages();\n    const self = this\n    loginWithService(options, (error) => {\n      onSubmitHook(error,formState);\n      if (error) {\n        this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\");\n      } else {\n        this.setState({ formState: STATES.PROFILE });\n        this.clearDefaultFieldValues();\n        loginResultCallback(() => {\n          Meteor.setTimeout(() => this.state.onSignedInHook(), 100);\n        });\n      }\n    });\n\n  }\n\n  signUp(options = {}) {\n    const {\n      username = null,\n      email = null,\n      usernameOrEmail = null,\n      password,\n      formState,\n      onSubmitHook\n    }Â = this.state;\n    let error = false;\n    this.clearMessages();\n\n    if (username !== null) {\n      if ( !this.validateField('username', username) ) {\n        if (this.state.formState == STATES.SIGN_UP) {\n          this.state.onSubmitHook(\"error.accounts.usernameRequired\", this.state.formState);\n        }\n        error = true;\n      } else {\n        options.username = username;\n      }\n    } else {\n      if ([\n        \"USERNAME_AND_EMAIL\",\n        \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n      ].includes(passwordSignupFields()) && !this.validateField('username', username) ) {\n        if (this.state.formState == STATES.SIGN_UP) {\n          this.state.onSubmitHook(\"error.accounts.usernameRequired\", this.state.formState);\n        }\n        error = true;\n      }\n    }\n\n    if (!this.validateField('email', email)){\n      error = true;\n    } else {\n      options.email = email;\n    }\n\n    if ([\n      \"EMAIL_ONLY_NO_PASSWORD\",\n      \"USERNAME_AND_EMAIL_NO_PASSWORD\"\n    ].includes(passwordSignupFields())) {\n      // Generate a random password.\n      options.password = uuid(); //Meteor.uuid();\n    } else if (!this.validateField('password', password)) {\n      onSubmitHook(\"Invalid password\", formState);\n      error = true;\n    } else {\n      options.password = password;\n    }\n\n    const SignUp = function(_options) {\n      Accounts.createUser(_options, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n          if (this.translate(`error.accounts.${error.reason}`)) {\n            onSubmitHook(`error.accounts.${error.reason}`, formState);\n          }\n          else {\n            onSubmitHook(\"unknown_error\", formState);\n          }\n        }\n        else {\n          onSubmitHook(null, formState);\n          this.setState({ formState: STATES.PROFILE, password: null });\n          let user = Accounts.user();\n          loginResultCallback(this.state.onPostSignUpHook.bind(this, _options, user));\n          this.clearDefaultFieldValues();\n        }\n\n        this.setState({ waiting: false });\n      });\n    };\n\n    if (!error) {\n      this.setState({ waiting: true });\n      // Allow for Promises to return.\n      let promise = this.state.onPreSignUpHook(options);\n      if (promise instanceof Promise) {\n        promise.then(SignUp.bind(this, options));\n      }\n      else {\n        SignUp(options);\n      }\n    }\n  }\n\n  loginWithoutPassword(){\n    const {\n      email = '',\n      usernameOrEmail = '',\n      waiting,\n      formState,\n      onSubmitHook\n    }Â = this.state;\n\n    if (waiting) {\n      return;\n    }\n\n    if (this.validateField('email', email)) {\n      this.setState({ waiting: true });\n\n      Accounts.loginWithoutPassword({ email: email }, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n        }\n        else {\n          this.showMessage(\"info.emailSent\", 'success', 5000);\n          this.clearDefaultFieldValues();\n        }\n        onSubmitHook(error, formState);\n        this.setState({ waiting: false });\n      });\n    } else if (this.validateField('username', usernameOrEmail)) {\n      this.setState({ waiting: true });\n\n      Accounts.loginWithoutPassword({ email: usernameOrEmail, username: usernameOrEmail }, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n        }\n        else {\n          this.showMessage(\"info.emailSent\", 'success', 5000);\n          this.clearDefaultFieldValues();\n        }\n        onSubmitHook(error, formState);\n        this.setState({ waiting: false });\n      });\n    } else {\n      let errMsg = \"error.accounts.invalid_email\";\n      this.showMessage(errMsg,'warning');\n      onSubmitHook(this.translate(errMsg), formState);\n    }\n  }\n\n  passwordReset() {\n    const {\n      email = '',\n      waiting,\n      formState,\n      onSubmitHook\n    }Â = this.state;\n\n    if (waiting) {\n      return;\n    }\n\n    this.clearMessages();\n    if (this.validateField('email', email)) {\n      this.setState({ waiting: true });\n\n      Accounts.forgotPassword({ email: email }, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n        }\n        else {\n          this.showMessage(\"info.emailSent\", 'success', 5000);\n          this.clearDefaultFieldValues();\n        }\n        onSubmitHook(error, formState);\n        this.setState({ waiting: false });\n      });\n    }\n  }\n\n  passwordChange() {\n    const {\n      password,\n      newPassword,\n      formState,\n      onSubmitHook,\n      onSignedInHook,\n    }Â = this.state;\n\n    if (!this.validateField('password', newPassword, 'newPassword')){\n      onSubmitHook('err.minChar',formState);\n      return;\n    }\n\n    let token = Accounts._loginButtonsSession.get('resetPasswordToken');\n    if (!token) {\n      token = Accounts._loginButtonsSession.get('enrollAccountToken');\n    }\n    if (token) {\n      Accounts.resetPassword(token, newPassword, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n          onSubmitHook(error, formState);\n        }\n        else {\n          this.showMessage('info.passwordChanged', 'success', 5000);\n          onSubmitHook(null, formState);\n          this.setState({ formState: STATES.PROFILE });\n          Accounts._loginButtonsSession.set('resetPasswordToken', null);\n          Accounts._loginButtonsSession.set('enrollAccountToken', null);\n          onSignedInHook();\n        }\n      });\n    }\n    else {\n      Accounts.changePassword(password, newPassword, (error) => {\n        if (error) {\n          this.showMessage(`error.accounts.${error.reason}` || \"unknown_error\", 'error');\n          onSubmitHook(error, formState);\n        }\n        else {\n          this.showMessage('info.passwordChanged', 'success', 5000);\n          onSubmitHook(null, formState);\n          this.setState({ formState: STATES.PROFILE });\n          this.clearDefaultFieldValues();\n        }\n      });\n    }\n  }\n\n  showMessage(message, type, clearTimeout, field){\n    message = this.translate(message).trim();\n    if (message) {\n      this.setState(({Â messages = [] }) => {\n        messages.push({\n          message,\n          type,\n          ...(field && {Â fieldÂ }),\n        });\n        return  {Â messages };\n      });\n      if (clearTimeout) {\n        this.hideMessageTimout = setTimeout(() => {\n          // Filter out the message that timed out.\n          this.clearMessage(message);\n        }, clearTimeout);\n      }\n    }\n  }\n\n  getMessageForField(field) {\n    const {Â messages = [] } = this.state;\n    return messages.find(({Â field:key }) => key === field);\n  }\n\n  clearMessage(message) {\n    if (message) {\n      this.setState(({Â messages = []Â }) => ({\n        messages: messages.filter(({Â message:a }) => a !== message),\n      }));\n    }\n  }\n\n  clearMessages() {\n    if (this.hideMessageTimout) {\n      clearTimeout(this.hideMessageTimout);\n    }\n    this.setState({ messages: [] });\n  }\n\n  componentWillUnmount() {\n    if (this.hideMessageTimout) {\n      clearTimeout(this.hideMessageTimout);\n    }\n\n  }\n\n  render() {\n    this.oauthButtons();\n    // Backwords compatibility with v1.2.x.\n    const {Â messages = [] }Â = this.state;\n    const message = {\n      deprecated: true,\n      message: messages.map(({Â message }) => message).join(', '),\n    };\n    return (\n      <Accounts.ui.Form\n        oauthServices={this.oauthButtons()}\n        fields={this.fields()}Â \n        buttons={this.buttons()}\n        {...this.state}\n        message={message}\n        translate={text => this.translate(text)}\n      />\n    );\n  }\n}\nLoginForm.propTypes = {\n  formState: PropTypes.symbol,\n  loginPath: PropTypes.string,\n  signUpPath: PropTypes.string,\n  resetPasswordPath: PropTypes.string,\n  profilePath: PropTypes.string,\n  changePasswordPath: PropTypes.string,\n};\nLoginForm.defaultProps = {\n  formState: null,\n  loginPath: null,\n  signUpPath: null,\n  resetPasswordPath: null,\n  profilePath: null,\n  changePasswordPath: null,\n};\n\nAccounts.ui.LoginForm = withTracker(() => {\n  // Listen for the user to login/logout and the services list to the user.\n  Meteor.subscribe('servicesList');\n  return ({\n    user: Accounts.user(),\n  });\n})(LoginForm);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Accounts } from 'meteor/accounts-base';\nimport { T9n } from 'meteor/softwarerero:accounts-t9n';\nimport { hasPasswordService } from '../../helpers.js';\n\nexport class PasswordOrService extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasPasswordService: hasPasswordService(),\n      services: Object.keys(props.oauthServices).map(service => {\n        return props.oauthServices[service].label\n      })\n    };\n  }\n\n  translate(text) {\n    if (this.props.translate) {\n      return this.props.translate(text);\n    }\n    return T9n.get(text);\n  }\n\n  render () {\n    let { className = \"password-or-service\", style = {} } = this.props;\n    let { hasPasswordService, services } = this.state;\n    labels = services;\n    if (services.length > 2) {\n      labels = [];\n    }\n\n    if (hasPasswordService && services.length > 0) {\n      return (\n        <div style={ style }Â className={ className }>\n          { `${this.translate('orUse')} ${ labels.join(' / ') }` }\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nPasswordOrService.propTypes = {\n  oauthServices: PropTypes.object\n};\n\nAccounts.ui.PasswordOrService = PasswordOrService;\n","import React from 'react';\nimport './Button.jsx';\nimport {Accounts} from 'meteor/accounts-base';\n\n\nexport class SocialButtons extends React.Component {\n  render() {\n    let { oauthServices = {}, className = \"social-buttons\" } = this.props;\n    return(\n      <div className={ className }>\n        {Object.keys(oauthServices).map((id, i) => {\n          return <Accounts.ui.Button {...oauthServices[id]} key={i} />;\n        })}\n      </div>\n    );\n  }\n}\n\nAccounts.ui.SocialButtons = SocialButtons;\n"]}